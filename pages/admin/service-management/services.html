<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Services </title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Tailwind Play CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#241358',
                    },
                },
            },
        };
    </script>
    <style>
        .scrollbar-hide {
            -ms-overflow-style: none;
            /* IE and Edge */
            scrollbar-width: none;
            /* Firefox */
        }

        .scrollbar-hide::-webkit-scrollbar {
            display: none;
            /* Chrome, Safari, and Opera */
        }

        #model-suggestion-list {
            /* Already handled with tailwind, but enforce just in case */
            position: absolute !important;
            z-index: 60;
        }
    </style>
</head>

<body class="bg-gray-50 min-h-screen">
    <div id="sidebar-root"></div>
    <div id="navbar-root"></div>

    <main id="main-content-service-management"
        class="bg-gray-100 pt-24 sm:pt-6 px-2 sm:px-4 lg:ml-[250px] transition-all duration-300 min-h-screen overflow-y-auto"
        tabindex="0">


        <!-- Desktop View -->
        <section id="desktop-content" class="hidden sm:block">
            <h1 class="text-2xl font-bold ">Services</h1>
            <!-- Search & Filter Bar -->

            <div class="flex justify-end mb-6 relative p-2">
                <div class="flex items-center gap-2 w-full max-w-lg bg-white shadow rounded-lg px-3 py-2">
                    <input type="text" id="searchInputDesktop" placeholder="Search customers..."
                        class="flex-grow outline-none border-none focus:ring-0 text-sm px-2" />
                    <button id="searchBtnDesktop" class="p-2 rounded-md hover:bg-gray-100" aria-label="Search">
                        <!-- Search SVG -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-600" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 1110.5 3a7.5 7.5 0 016.15 13.65z" />
                        </svg>
                    </button>
                    <button id="filterBtnDesktop" class="p-2 rounded-md hover:bg-gray-100"
                        aria-label="Toggle filter panel">
                        <!-- Filter SVG -->
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                            stroke="currentColor" class="w-5 h-5 text-gray-600">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3 4h18M6 10h12M9 16h6M11 20h2" />
                        </svg>
                    </button>
                </div>
                <!-- Floating Filter Panel -->
                <div id="filterPanelDesktop"
                    class="hidden absolute top-14 right-0 z-50 bg-white rounded-xl shadow-2xl scale-105 animate-bounce-in px-6 py-4 transition-all duration-300 min-w-[300px]">
                    <h3 class="text-lg font-semibold mb-2">Filters</h3>
                    <label class="block mb-2">
                        <span class="text-sm">Services More Than</span>
                        <input type="number" id="filterServicesDesktop" class="w-full border rounded px-2 py-1 mt-1"
                            placeholder="e.g. 3" />
                    </label>
                    <button id="applyFilterDesktop"
                        class="mt-2 px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700">Apply Filter</button>
                </div>
            </div>

            <div class="flex ml-4 pb-3 ">
                <div class="ml-10">
                    <a href="vehicles.html" id="add-vehicle" class="p-4 outline outline-gray-200 bg-white rounded"> Add
                        / Deactivate Vehicle
                    </a>
                </div>

                <div class="ml-10">
                    <a href="./ser.html" id="add-service" class="p-4 outline outline-gray-200 bg-white rounded">Add /
                        Deactivate Service
                    </a>
                </div>

                <div class="ml-10">
                    <button id="update-vehicle-service" class="p-4 outline outline-gray-200 bg-white rounded ">Add
                        Service to vehicle
                    </button>
                </div>
            </div>

            <!-- Customer Info Table -->
            <div class="flex justify-center">
                <div class="overflow-x-auto w-full max-w-6xl">
                    <h2 class="text-xl font-semibold mb-2">Vehicle Service Info</h2>
                    <table
                        class="min-w-[1000px] w-full table-auto border border-gray-300 bg-white shadow-sm rounded-md">
                        <thead class="bg-gray-100 text-gray-700 text-sm">
                            <tr>

                                <th class="border border-gray-300 p-2">Brand</th>
                                <th class="border border-gray-300 p-2">Model</th>
                                <th class="border border-gray-300 p-2">Fuel</th>
                                <th class="border border-gray-300 p-2">Type</th>
                                <th class="border border-gray-300 p-2">Service Name</th>
                                <th class="border border-gray-300 p-2">Date Added</th>
                                <th class="border border-gray-300 p-2">Last Date Deactivated</th>
                                <th class="border border-gray-300 p-2">Price</th>
                                <th class="border border-gray-300 p-2">Time to Complete (min)</th>
                                <th class="border border-gray-300 p-2">Actions</th>

                            </tr>
                        </thead>
                        <tbody id="customerTableBodyDesktop" class="text-sm"></tbody>
                    </table>
                    <!-- Pagination -->
                    <div class="flex justify-between items-center mt-4 text-sm text-gray-600 max-w-6xl mx-auto px-2">
                        <button id="prevPageDesktop" class="disabled:opacity-50" aria-label="Previous page">
                            ← Previous
                        </button>
                        <span id="pageInfoDesktop"></span>
                        <button id="nextPageDesktop" class="disabled:opacity-50" aria-label="Next page">Next →</button>
                    </div>
                </div>
            </div>


            <!-- Toast -->
            <div id="toastDesktop"
                class="hidden fixed bottom-4 right-4 bg-green-600 text-white px-4 py-2 rounded shadow-lg">
                User deleted successfully
            </div>

            <div id="toast" role="alert" aria-live="assertive"
                class="fixed bottom-6 right-6 bg-green-600 text-white px-5 py-3 rounded opacity-0 pointer-events-none transition-opacity z-50">
            </div>
        </section>

        <!-- Mobile View -->
        <section class="sm:hidden">
            <!-- Search & Filter -->
            <div class="relative mb-4">
                <div class="flex items-center w-full max-w-full relative">
                    <input type="text" id="searchInputMobile"
                        class="w-full rounded-full px-4 pr-12 shadow-sm outline-none py-3"
                        placeholder="Search customers..." aria-label="Search customers" />
                    <button id="searchBtnMobile"
                        class="absolute right-2 top-[6px] bg-white rounded-full p-2 shadow hover:bg-gray-100"
                        aria-label="Search">
                        <!-- Search SVG -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 1110.5 3a7.5 7.5 0 016.15 13.65z" />
                        </svg>
                    </button>
                </div>
            </div>
            <div class="flex justify-end px-4 relative">
                <button id="filterBtnMobile" class="bg-white rounded-full p-2 shadow hover:bg-gray-100"
                    aria-label="Toggle filter mobile">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-gray-600" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M3 4h18l-7 8v6l-4 2v-8z" />
                    </svg>
                </button>
                <div id="filterPanelMobile"
                    class="hidden absolute top-12 right-0 z-50 bg-white rounded-xl shadow-2xl scale-105 animate-bounce-in px-6 py-4 transition-all duration-300 min-w-[220px]">
                    <h3 class="text-lg font-semibold mb-2">Filters</h3>
                    <label class="block mb-2">
                        <span class="text-sm">Services More Than</span>
                        <input type="number" id="filterServicesMobile" class="w-full border rounded px-2 py-1 mt-1"
                            placeholder="e.g. 3" />
                    </label>
                    <button id="applyFilterMobile"
                        class="mt-2 px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 w-full">Apply
                        Filter</button>
                </div>
            </div>

            <div>
                <h2 class="text-lg font-semibold mb-2 px-4">Vehicle Serivce Info</h2>
                <div id="customerListMobile" class="p-2 space-y-2"></div>
                <div id="paginationMobile"
                    class="flex justify-between items-center mt-4 text-sm text-gray-600 max-w-md mx-auto px-4">
                    <button id="prevPageMobile" class="disabled:opacity-50" aria-label="Previous page">←
                        Previous</button>
                    <span id="pageInfoMobile"></span>
                    <button id="nextPageMobile" class="disabled:opacity-50" aria-label="Next page">Next →</button>
                </div>
            </div>

            <div id="customer-modal"
                class="fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 hidden">
                <div class="bg-white rounded-lg shadow-lg w-full max-w-md max-h-full flex flex-col overflow-hidden relative"
                    style="height: 100vh;">
                    <button id="modal-close-btn" aria-label="Close modal"
                        class="absolute top-4 right-4 text-gray-600 hover:text-gray-900 focus:outline-none">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="18" y1="6" x2="6" y2="18" />
                            <line x1="6" y1="6" x2="18" y2="18" />
                        </svg>
                    </button>
                    <div id="modal-content" class="p-6 overflow-auto flex-grow">
                        <!-- Dynamic customer info will be inserted here -->
                    </div>
                </div>
            </div>



        </section>
        <div id="filterPanelDesktop"
           class="hidden absolute top-14 right-0 z-50 bg-white rounded-xl shadow-2xl px-6 py-4 min-w-[320px] scale-105 animate-bounce-in transiton-all">
        <h3 class="text-lg font-semibold mb-4">Filters</h3>
        <form id="filterFormDesktop" class="space-y-4">
          <div>
            <label class="block mb-1 font-semibold" for="filterDateFromDesktop">Date Added From</label>
            <input type="date" id="filterDateFromDesktop" name="dateFrom" class="w-full border rounded px-2 py-1" />
          </div>
          <div>
            <label class="block mb-1 font-semibold" for="filterDateToDesktop">Date Added To</label>
            <input type="date" id="filterDateToDesktop" name="dateTo" class="w-full border rounded px-2 py-1" />
          </div>
          <div>
            <label class="block mb-1 font-semibold" for="filterPriceOpDesktop">Price Op</label>
            <select id="filterPriceOpDesktop" name="priceOp" class="w-full border rounded px-2 py-1">
              <option value="=">=</option>
              <option value=">=">≥</option>
              <option value="<=">≤</option>
            </select>
          </div>
          <div>
            <label class="block mb-1 font-semibold" for="filterPriceDesktop">Price</label>
            <input type="number" min="0" step="0.01" id="filterPriceDesktop" name="price" class="w-full border rounded px-2 py-1" placeholder="Amount" />
          </div>
          <div>
            <label class="block mb-1 font-semibold" for="filterTimeOpDesktop">Time Op</label>
            <select id="filterTimeOpDesktop" name="timeOp" class="w-full border rounded px-2 py-1">
              <option value="=">=</option>
              <option value=">=">≥</option>
              <option value="<=">≤</option>
            </select>
          </div>
          <div>
            <label class="block mb-1 font-semibold" for="filterTimeDesktop">Time (min)</label>
            <input type="number" min="0" id="filterTimeDesktop" name="time" class="w-full border rounded px-2 py-1" placeholder="Minutes" />
          </div>
          <div>
            <label class="block mb-1 font-semibold" for="filterFuelDesktop">Fuel</label>
            <select id="filterFuelDesktop" name="fuel" class="w-full border rounded px-2 py-1">
              <option value="">All</option>
              <option>Petrol</option>
              <option>Diesel</option>
              <option>EV</option>
              <option>Hybrid</option>
              <option>CNG</option>
            </select>
          </div>
          <div>
            <label class="block mb-1 font-semibold" for="filterTypeDesktop">Vehicle Type</label>
            <select id="filterTypeDesktop" name="type" class="w-full border rounded px-2 py-1">
              <option value="">All</option>
              <option value="two-wheeler">Two-Wheeler</option>
              <option value="four-wheeler">Four-Wheeler</option>
            </select>
          </div>
          <button type="submit" class="w-full bg-primary text-white rounded py-2 hover:bg-indigo-900 transition">
            Apply Filter
          </button>
        </form>
      </div>
    </div>

        <div id="update-vehicle-service-modal"
            class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 hidden">
            <div role="dialog" aria-modal="true" aria-labelledby="addServiceTitle" tabindex="-1"
                class="bg-white rounded-lg max-w-lg w-full max-h-[90vh] overflow-y-auto p-6 relative shadow-lg">
                <button id="closeAddServiceModal" aria-label="Close modal"
                    class="absolute top-3 right-3 text-gray-600 hover:text-gray-900 text-3xl font-bold">&times;</button>
                <h2 id="addServiceTitle" class="text-2xl font-bold mb-6 text-center">Add Service to Vehicle</h2>

                <form id="addServiceForm" autocomplete="off" class="space-y-4">

                    <div class="relative">
                        <label for="brandInput" class="font-semibold block mb-1">Brand <span
                                class="text-red-600">*</span></label>
                        <input id="brandInput" name="brand" type="text" autocomplete="off"
                            class="border border-gray-300 rounded w-full p-2" aria-autocomplete="list"
                            aria-controls="brandSuggestionList" aria-haspopup="listbox" aria-expanded="false" />
                        <ul id="brandSuggestionList" class="suggestion-list hidden" role="listbox"></ul>
                        <p id="brandError" class="text-xs text-red-600 mt-1 hidden">Please choose a valid brand.</p>
                    </div>

                    <div>
                        <label for="modelSelect" class="font-semibold block mb-1">Model <span
                                class="text-red-600">*</span></label>
                        <select id="modelSelect" name="model" disabled
                            class="border border-gray-300 rounded w-full p-2">
                            <option value="">Select brand first</option>
                        </select>
                        <p id="modelError" class="text-xs text-red-600 mt-1 hidden">Please select a model.</p>
                    </div>

                    <div>
                        <label for="fuelSelect" class="font-semibold block mb-1">Fuel Type <span
                                class="text-red-600">*</span></label>
                        <select id="fuelSelect" name="fuel" disabled class="border border-gray-300 rounded w-full p-2">
                            <option value="">Select fuel type</option>
                            <option value="Petrol">Petrol</option>
                            <option value="Diesel">Diesel</option>
                            <option value="EV">EV</option>
                            <option value="Hybrid">Hybrid</option>
                            <option value="CNG">CNG</option>
                        </select>
                        <p id="fuelError" class="text-xs text-red-600 mt-1 hidden">Please select fuel type.</p>
                    </div>

                    <fieldset class="mb-2">
                        <legend class="font-semibold mb-1">Vehicle Type <span class="text-red-600">*</span></legend>
                        <div class="flex gap-6">
                            <label class="inline-flex items-center">
                                <input type="radio" name="vehicleType" value="two-wheeler" disabled />
                                <span class="ml-2">Two-Wheeler</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="vehicleType" value="four-wheeler" disabled />
                                <span class="ml-2">Four-Wheeler</span>
                            </label>
                        </div>
                        <p id="typeError" class="text-xs text-red-600 mt-1 hidden">Please select vehicle type.</p>
                    </fieldset>

                    <div class="relative">
                        <label for="serviceNameInput" class="font-semibold block mb-1">Service Name <span
                                class="text-red-600">*</span></label>
                        <input id="serviceNameInput" name="serviceName" type="text" disabled autocomplete="off"
                            class="border border-gray-300 rounded w-full p-2" aria-autocomplete="list"
                            aria-controls="serviceSuggestionList" aria-haspopup="listbox" aria-expanded="false" />
                        <ul id="serviceSuggestionList" class="suggestion-list hidden" role="listbox"></ul>
                        <p id="serviceError" class="text-xs text-red-600 mt-1 hidden">Please enter a service name.</p>
                    </div>

                    <div>
                        <label for="timeToCompleteInput" class="font-semibold block mb-1">Time to Complete (minutes)
                            <span class="text-red-600">*</span></label>
                        <input id="timeToCompleteInput" name="timeToComplete" type="number" min="1" disabled
                            class="border border-gray-300 rounded w-full p-2" />
                        <p id="timeError" class="text-xs text-red-600 mt-1 hidden">Please enter valid time.</p>
                    </div>

                    <div>
                        <label for="priceInput" class="font-semibold block mb-1">Price <span
                                class="text-red-600">*</span></label>
                        <input id="priceInput" name="price" type="number" min="0" step="0.01" disabled
                            class="border border-gray-300 rounded w-full p-2" />
                        <p id="priceError" class="text-xs text-red-600 mt-1 hidden">Please enter valid price.</p>
                    </div>

                    <button type="submit" id="addServiceSubmitBtn" disabled
                        class="w-full bg-primary hover:bg-indigo-900 text-white p-3 rounded font-semibold transition disabled:opacity-50">
                        Add Service
                    </button>

                </form>
            </div>
        </div>


    </main>

    <script type="module" src="../../../components/components-loader.js"></script>

<!-- 
    <script>
        // Shared customer data
        const customers = [
            { id: "68686", name: "John", email: "john-44@a.in", phone: "96565464855", address: "xxx, yyy, zzz", services: 7 },
            { id: "545454", name: "Barane", email: "bk@gmail.com", phone: "4894848458", address: "aaa, zzz", services: 3 },
            { id: "565468", name: "Kumar", email: "kumar@a.com", phone: "4186468681", address: "ttt, uuu, zzz", services: 1 },
            { id: "111111", name: "Alice", email: "alice@mail.com", phone: "999888777", address: "abc street", services: 5 },
            { id: "222222", name: "Bob", email: "bob@mail.com", phone: "111222333", address: "def road", services: 2 },
            { id: "333333", name: "Charlie", email: "charlie@mail.com", phone: "444555666", address: "ghi ave", services: 9 },
            { id: "444444", name: "David", email: "david@mail.com", phone: "777888999", address: "jkl lejfhgbherjgbj ergrge grgerge rgergerger errekjerkt hrktwhrkjth    gwrjghrjwghane", services: 4 },
            { id: "555555", name: "Eva", email: "eva@mail.com", phone: "123123123", address: "mno park", services: 6 }
        ];

        const brands = [
            "Honda", "Yamaha", "TVS", "Suzuki", "Bajaj", "Hero", "Royal Enfield",
            "Toyota", "Hyundai", "Maruti"
        ];
        const modelsByBrand = {
            "Honda": ["Activa 6G", "CB Shine", "CBR 150R"],
            "Yamaha": ["FZ", "R15", "FZ-FI"],
            "TVS": ["Apache", "Ntorq", "Jupiter"],
            "Suzuki": ["Access", "Gixxer", "Burgman"],
            "Bajaj": ["Pulsar", "Platina"],
            "Hero": ["Splendor", "Glamour"],
            "Royal Enfield": ["Bullet", "Classic 350"],
            "Toyota": ["Corolla", "Camry"],
            "Hyundai": ["i20", "Venue"],
            "Maruti": ["Swift", "Alto"]
        };
        const servicesByType = {
            "two-wheeler": [
                { id: 1, name: "Oil Change", time: "30 min", amount: 300 },
                { id: 2, name: "Chain Lubrication", time: "15 min", amount: 100 },
                { id: 3, name: "Brake Check", time: "20 min", amount: 200 }
            ],
            "four-wheeler": [
                { id: 4, name: "Oil Change", time: "45 min", amount: 800 },
                { id: 5, name: "Wheel Alignment", time: "60 min", amount: 1200 },
                { id: 6, name: "AC Service", time: "50 min", amount: 1500 }
            ]
        };

        let servicesData = [
            {
                id: 1, brand: "Honda", model: "Activa 6G", fuel: "Petrol", type: "two-wheeler",
                serviceName: "Oil Change", dateAdded: "2025-09-10", lastDeactivated: null,
                price: 300, timeToComplete: 30, active: true
            },
            {
                id: 2, brand: "Toyota", model: "Corolla", fuel: "Diesel", type: "four-wheeler",
                serviceName: "Wheel Alignment", dateAdded: "2025-08-15", lastDeactivated: "2025-09-05",
                price: 1200, timeToComplete: 60, active: false
            },
            {
                id: 3, brand: "Yamaha", model: "FZ", fuel: "Petrol", type: "two-wheeler",
                serviceName: "Brake Check", dateAdded: "2025-09-01", lastDeactivated: null,
                price: 200, timeToComplete: 20, active: true
            }
        ];

        // Desktop Variables
        const tableBodyDesktop = document.getElementById("customerTableBodyDesktop");
        const prevBtnDesktop = document.getElementById("prevPageDesktop");
        const nextBtnDesktop = document.getElementById("nextPageDesktop");
        const pageInfoDesktop = document.getElementById("pageInfoDesktop");
        const searchInputDesktop = document.getElementById("searchInputDesktop");
        const searchBtnDesktop = document.getElementById("searchBtnDesktop");
        const filterBtnDesktop = document.getElementById("filterBtnDesktop");
        const filterPanelDesktop = document.getElementById("filterPanelDesktop");
        const applyFilterDesktop = document.getElementById("applyFilterDesktop");
        const filterServicesDesktop = document.getElementById("filterServicesDesktop");
        const toastDesktop = document.getElementById("toastDesktop");

        // Mobile Variables
        const customerListMobile = document.getElementById("customerListMobile");
        const searchInputMobile = document.getElementById("searchInputMobile");
        const searchBtnMobile = document.getElementById("searchBtnMobile");
        const filterBtnMobile = document.getElementById("filterBtnMobile");
        const filterPanelMobile = document.getElementById("filterPanelMobile");
        const applyFilterMobile = document.getElementById("applyFilterMobile");
        const filterServicesMobile = document.getElementById("filterServicesMobile");
        const customerModalMobile = document.getElementById("customer-modal");
        const modalCloseBtnMobile = document.getElementById("modal-close-btn");
        const modalContentMobile = document.getElementById("modal-content");
        const addMechanicModalMobile = document.getElementById('add-vehicle-modal-mobile');
        const addMechanicFormMobile = document.getElementById('addMechanicFormMobile');
        const closeAddMechMobileBtn = document.getElementById('closeAddMechMobile');
        const menuActions = document.getElementById('menu_actions');

        // Desktop Modals
        const desktopViewModal = document.getElementById("desktop-viewModal");
        const desktopModalContent = document.getElementById("desktop-modalContent");

        // Mobile Pagination Variables
        const prevBtnMobile = document.getElementById("prevPageMobile");
        const nextBtnMobile = document.getElementById("nextPageMobile");
        const pageInfoMobile = document.getElementById("pageInfoMobile");

        // Desktop Pagination
        let currentPageDesktop = 1;
        const rowsPerPageDesktop = 5;
        let filteredDataDesktop = [...customers];

        // Mobile Pagination
        let currentPageMobile = 1;
        const rowsPerPageMobile = 5;
        const fullDataMobile = [...customers];
        let filteredDataMobile = [...fullDataMobile];

        // ---- Desktop Functions ----

        function renderTableDesktop(data) {
            filteredDataDesktop = data;
            const start = (currentPageDesktop - 1) * rowsPerPageDesktop;
            const end = start + rowsPerPageDesktop;
            const pageData = filteredDataDesktop.slice(start, end);

            tableBodyDesktop.innerHTML = "";
            pageData.forEach((c, idx) => {
                const row = document.createElement("tr");
                row.className = "hover:bg-gray-50";
                row.innerHTML = `
                   
                    <td class="py-2 px-4 border border-gray-300">${c.id}</td>
                    <td class="py-2 px-4 border border-gray-300">${c.name}</td>
                    <td class="py-2 px-4 border border-gray-300">${c.email}</td>
                    <td class="py-2 px-4 border border-gray-300">${c.phone}</td>
                    <td class="py-2 px-4 border border-gray-300">${c.address}</td>
                    <td class="py-2 px-4 border border-gray-300">${c.services}</td>
                    <td class="py-2 px-4 border border-gray-300 relative">
                        <button class="actionBtnDesktop p-1 rounded hover:bg-gray-200 ce">⋮</button>
                        <div class="actionMenuDesktop hidden absolute right-0 mt-1 bg-white border rounded shadow-lg z-10">
                            <button class="block w-full px-4 py-2 text-left hover:bg-gray-100 viewBtnDesktop">View</button>
                            <button class="block w-full px-4 py-2 text-left hover:bg-gray-100 deactivateBtnDesktop">Deactivate</button>
                        </div>
                    </td>
                `;
                tableBodyDesktop.appendChild(row);
            });

            attachDesktopActionEvents();
            updatePaginationDesktop();
        }

        function attachDesktopActionEvents() {
            document.querySelectorAll(".actionBtnDesktop").forEach(btn => {
                btn.addEventListener("click", () => {
                    const menu = btn.nextElementSibling;
                    if (menu) menu.classList.toggle("hidden");
                });
            });

            document.querySelectorAll(".viewBtnDesktop").forEach((btn, idx) => {
                btn.addEventListener("click", () => {
                    const customerIndex = (currentPageDesktop - 1) * rowsPerPageDesktop + idx;
                    showDesktopModal(filteredDataDesktop[customerIndex]);
                });
            });

            document.querySelectorAll(".deactivateBtnDesktop").forEach((btn, idx) => {
                btn.addEventListener("click", () => {
                    const customerIndex = (currentPageDesktop - 1) * rowsPerPageDesktop + idx;
                    const customer = filteredDataDesktop[customerIndex];
                    if (confirm(`Deactivate ${customer.name}?`)) {
                        showToastDesktop();
                    }
                });
            });
        }

        function updatePaginationDesktop() {
            const totalPages = Math.ceil(filteredDataDesktop.length / rowsPerPageDesktop);
            pageInfoDesktop.textContent = `Page ${currentPageDesktop} of ${totalPages}`;
            prevBtnDesktop.disabled = currentPageDesktop === 1;
            nextBtnDesktop.disabled = currentPageDesktop === totalPages;
        }

        function showDesktopModal(customer) {
            desktopModalContent.innerHTML = `
                <p><strong>ID:</strong> ${customer.id}</p>
                <p><strong>Name:</strong> ${customer.name}</p>
                <p><strong>Email:</strong> ${customer.email}</p>
                <p><strong>Phone:</strong> ${customer.phone}</p>
                <p><strong>Address:</strong> ${customer.address}</p>
                <p><strong>Services:</strong> ${customer.services}</p>
            `;
            desktopViewModal.classList.remove("hidden");
        }

        function closeDesktopModal() {
            desktopViewModal.classList.add("hidden");
        }

        function showToastDesktop() {
            toastDesktop.classList.remove("hidden");
            setTimeout(() => toastDesktop.classList.add("hidden"), 3000);
        }

        // Desktop Pagination events
        prevBtnDesktop.addEventListener("click", () => {
            if (currentPageDesktop > 1) {
                currentPageDesktop--;
                renderTableDesktop(filteredDataDesktop);
            }
        });

        nextBtnDesktop.addEventListener("click", () => {
            const totalPages = Math.ceil(filteredDataDesktop.length / rowsPerPageDesktop);
            if (currentPageDesktop < totalPages) {
                currentPageDesktop++;
                renderTableDesktop(filteredDataDesktop);
            }
        });

        // Desktop Search by SVG button and enter
        searchBtnDesktop.addEventListener("click", () => {
            const query = searchInputDesktop.value.trim().toLowerCase();
            currentPageDesktop = 1;
            filteredDataDesktop = customers.filter(c =>
                c.name.toLowerCase().includes(query) ||
                c.email.toLowerCase().includes(query) ||
                c.phone.toLowerCase().includes(query) ||
                c.id.toLowerCase().includes(query)
            );
            renderTableDesktop(filteredDataDesktop);
        });
        searchInputDesktop.addEventListener("keydown", e => {
            if (e.key === "Enter") searchBtnDesktop.click();
        });

        // Desktop Filter floating panel
        filterBtnDesktop.addEventListener("click", (e) => {
            e.stopPropagation();
            filterPanelDesktop.classList.toggle("hidden");
        });
        document.addEventListener("click", (e) => {
            if (!filterPanelDesktop.classList.contains("hidden") && !filterPanelDesktop.contains(e.target) && e.target !== filterBtnDesktop) {
                filterPanelDesktop.classList.add("hidden");
            }
        });

        applyFilterDesktop.addEventListener("click", () => {
            const minServices = parseInt(filterServicesDesktop.value) || 0;
            currentPageDesktop = 1;
            filteredDataDesktop = customers.filter(c => c.services > minServices);
            renderTableDesktop(filteredDataDesktop);
        });

        // desktopViewModal.addEventListener("click", e => {
        //     if (e.target === desktopViewModal) closeDesktopModal();
        // });

        // ---- Mobile Functions ----

        function renderMobileListPaginated(data) {
            filteredDataMobile = data;
            const start = (currentPageMobile - 1) * rowsPerPageMobile;
            const end = start + rowsPerPageMobile;
            const pageData = filteredDataMobile.slice(start, end);

            customerListMobile.innerHTML = "";
            pageData.forEach((c, idx) => {
                const item = document.createElement("div");
                item.className = "border-b border-black font-medium py-4 flex items-center justify-between px-4";
                item.innerHTML = `
                    <div class="flex items-center space-x-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-600" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M5.121 17.804A9.97 9.97 0 0112 15c2.21 0 4.24.72 5.879 1.928M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                        <span>${c.name}</span>
                    </div>
                    <button aria-label="View details for ${c.name}" class="viewBtnMobile" data-index="${start + idx}">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-500" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                        </svg>
                    </button>
                `;
                customerListMobile.appendChild(item);
            });

            updatePaginationMobile();
            attachMobileViewEvents();
        }

        function updatePaginationMobile() {
            const totalPages = Math.ceil(filteredDataMobile.length / rowsPerPageMobile);
            pageInfoMobile.textContent = `Page ${currentPageMobile} of ${totalPages}`;
            prevBtnMobile.disabled = currentPageMobile === 1;
            nextBtnMobile.disabled = currentPageMobile === totalPages;
        }

        function attachMobileViewEvents() {
            document.querySelectorAll(".viewBtnMobile").forEach(btn => {
                btn.addEventListener("click", () => {
                    const idx = parseInt(btn.getAttribute("data-index"));
                    showMobileModal(filteredDataMobile[idx]);
                });
            });
        }

        function showMobileModal(customer) {
            modalContentMobile.innerHTML = `
                <p><strong>ID:</strong> ${customer.id}</p>
                <p><strong>Name:</strong> ${customer.name}</p>
                <p><strong>Email:</strong> ${customer.email}</p>
                <p><strong>Phone:</strong> ${customer.phone}</p>
                <p><strong>Address:</strong> ${customer.address}</p>
                <p><strong>Services:</strong> ${customer.services}</p>
            `;
            customerModalMobile.classList.remove("hidden");
        }

        function closeMobileModal() {
            customerModalMobile.classList.add("hidden");
        }

        // Mobile Pagination events
        prevBtnMobile.addEventListener("click", () => {
            if (currentPageMobile > 1) {
                currentPageMobile--;
                renderMobileListPaginated(filteredDataMobile);
            }
        });

        nextBtnMobile.addEventListener("click", () => {
            const totalPages = Math.ceil(filteredDataMobile.length / rowsPerPageMobile);
            if (currentPageMobile < totalPages) {
                currentPageMobile++;
                renderMobileListPaginated(filteredDataMobile);
            }
        });

        // Mobile Search by SVG button and enter
        searchBtnMobile.addEventListener("click", () => {
            const query = searchInputMobile.value.trim().toLowerCase();
            filteredDataMobile = fullDataMobile.filter(c =>
                c.name.toLowerCase().includes(query) ||
                c.email.toLowerCase().includes(query) ||
                c.phone.toLowerCase().includes(query) ||
                c.id.toLowerCase().includes(query)
            );
            currentPageMobile = 1;
            renderMobileListPaginated(filteredDataMobile);
        });
        searchInputMobile.addEventListener("keydown", e => {
            if (e.key === "Enter") searchBtnMobile.click();
        });

        // Mobile Filter floating panel
        filterBtnMobile.addEventListener("click", (e) => {
            e.stopPropagation();
            filterPanelMobile.classList.toggle("hidden");
        });
        document.addEventListener("click", (e) => {
            if (!filterPanelMobile.classList.contains("hidden") && !filterPanelMobile.contains(e.target) && e.target !== filterBtnMobile) {
                filterPanelMobile.classList.add("hidden");
            }
        });

        applyFilterMobile.addEventListener("click", () => {
            const minServices = parseInt(filterServicesMobile.value) || 0;
            filteredDataMobile = fullDataMobile.filter(c => c.services > minServices);
            currentPageMobile = 1;
            renderMobileListPaginated(filteredDataMobile);
        });

        modalCloseBtnMobile.addEventListener("click", closeMobileModal);

        customerModalMobile.addEventListener("click", (e) => {
            if (e.target === customerModalMobile) {
                closeMobileModal();
            }
        });

        // Initial renders
        renderTableDesktop(customers);
        renderMobileListPaginated(fullDataMobile);

        // function closeDesktopModal() {
        //     desktopViewModal.classList.add("hidden");
        // }


        // const vehicle_add = document.getElementById('add-vehicle');
        // const service_add = document.getElementById('add-service');
        // const update_vehicle_service = document.getElementById('update-vehicle-service');
        // const desktop_service_add_modal = document.getElementById('add-service-modal');
        // const desktop_vehicle_add_modal = document.getElementById('add-vehicle-modal');
        // const desktop_update_vehicle_service_modal = document.getElementById('update-vehicle-service-modal');



        // function closeVehicleAddModal() {
        //     desktop_vehicle_add_modal.classList.add('hidden');
        // }

        // function closeServiceAddModal() {
        //     desktop_service_add_modal.classList.add('hidden');
        // }

        // function closeUpdateVehicleServiceModal() {
        //     desktop_update_vehicle_service_modal.classList.add('hidden')
        // }

        // service_add.addEventListener('click', () => {
        //     desktop_service_add_modal.classList.remove('hidden');
        // })

        // vehicle_add.addEventListener('click', () => {
        //     desktop_vehicle_add_modal.classList.remove('hidden');
        // })

        // update_vehicle_service.addEventListener('click', () => {
        //     desktop_update_vehicle_service_modal.classList.remove('hidden');
        // })



        // mechanic addition section

        function showToast(message, type = "error") {
            const toast = document.createElement("div");
            toast.innerText = message;
            toast.className = `
        fixed bottom-5 right-5 px-4 py-2 rounded shadow-lg text-white z-[9999]
        ${type === "error" ? "bg-red-500" : "bg-green-500"}
    `;
            document.body.appendChild(toast);

            setTimeout(() => {
                toast.remove();
            }, 3000);
        }
        // // --- Form Validation ---

        // document.getElementById('add-service-form').addEventListener('submit', async function (e) {
        //     e.preventDefault();

        //     showToast("service added successfully!", "success");


        //     const service_name = this.name.value.trim();
        //     console.log(service_name)
        // })



        // document.querySelector("#add-vehicle-modal form").addEventListener("submit", async function (e) {
        //     e.preventDefault(); // prevent actual submit

        //     const brand = this.brand.value.trim();
        //     const model = this.model.value.trim();
        //     const fuel = this.fuel.value.trim();
        //     const type = this.type.value.trim();

        //     // If everything is fine
        //     showToast("Vehicle added successfully!", "success");

        //     // Example: collect data
        //     const formData = {
        //         brand,
        //         model,
        //         fuel,
        //         type
        //     };

        //     console.log(formData)


        // });

        // const mobile_add_vehicle_modal = document.getElementById('add-vehicle-modal-mobile');
        // const mobile_add_service_modal = document.getElementById('add-service-modal-mobile');

        // function mobile_add_vehicle_modal_close() {
        //     mobile_add_vehicle_modal.classList.add('hidden');
        // }

        // function mobile_add_service_modal_close() {
        //     mobile_add_service_modal.classList.add('hidden')
        // }

        // document.getElementById('add-vehicle-form-mobile').addEventListener('submit', async function (e) {

        //     e.preventDefault();

        //     const brand = this.brand.value.trim();
        //     const model = this.model.value.trim();
        //     const fuel = this.fuel.value.trim();
        //     const type = this.type.value.trim();

        //     // If everything is fine
        //     showToast("Vehicle added successfully!", "success");

        //     // Example: collect data
        //     const formData = {
        //         brand,
        //         model,
        //         fuel,
        //         type
        //     };

        //     console.log(formData)
        // })

        // document.getElementById('add-service-form-mobile').addEventListener('submit', async function (e) {
        //     e.preventDefault();

        //     showToast("service added successfully!", "success");


        //     const service_name = this.name.value.trim();
        //     console.log(service_name)
        // })




        document.addEventListener('navbarLoaded', () => {
            const menu_actions = document.getElementById('menu_actions');

            menu_actions.addEventListener('click', (event) => {
                event.stopPropagation();

                let dropdown = document.getElementById('pageActionsDropdown');
                if (dropdown) {
                    dropdown.classList.toggle('hidden');
                    return;
                }

                dropdown = document.createElement('div');
                dropdown.id = 'pageActionsDropdown';
                dropdown.className = 'absolute right-0 mt-12 w-44 rounded-md shadow-lg bg-primary text-white ring-1 ring-black ring-opacity-5 z-50';

                dropdown.innerHTML = `
      <button id="addVehicleBtn" class="block w-full text-left px-4 py-2 hover:bg-indigo-700 focus:outline-none" type="button">
        Add Vehicle
      </button>
      <button id="addServiceBtn" class="block w-full text-left px-4 py-2 hover:bg-indigo-700 focus:outline-none" type="button">
        Add Service
      </button>
      
    `;

                menu_actions.parentElement.appendChild(dropdown);

                dropdown.querySelector('#addVehicleBtn').addEventListener('click', () => {
                    dropdown.classList.add('hidden');

                    if (window.innerWidth < 640) mobile_add_vehicle_modal.classList.remove('hidden');
                    else mobile_add_vehicle_modal.classList.add('hidden');
                })

                dropdown.querySelector('#addServiceBtn').addEventListener('click', () => {
                    dropdown.classList.add('hidden');

                    if (window.innerWidth < 640) mobile_add_service_modal.classList.remove('hidden');
                    else mobile_add_service_modal.classList.add('hidden');
                })

            });

            // Close dropdown if clicked outside
            document.addEventListener('click', () => {
                const dropdown = document.getElementById('pageActionsDropdown');
                if (dropdown) {
                    dropdown.classList.add('hidden');
                }
            });

        });




        // LocalStorage: use key 'my_services_cache'
        function getPersistedServices(type) {
            if (!window.localStorage) return null;
            try {
                const cache = JSON.parse(localStorage.getItem('my_services_cache') || '{}');
                if (cache && cache[type]) return cache[type];
            } catch { }
            return null;
        }
        function setPersistedServices(type, arr) {
            if (!window.localStorage) return;
            try {
                const cache = JSON.parse(localStorage.getItem('my_services_cache') || '{}');
                cache[type] = arr;
                localStorage.setItem('my_services_cache', JSON.stringify(cache));
            } catch { }
        }

        /* ===== STATE ===== */
        let state = {
            brand: "",
            model: "",
            fuel: "",
            type: "",
            brandDropdown: [],
            brandDropdownIndex: -1,
            modelDropdown: [],
            services: [], // Current (in-memory; replaced on Get Services click)
            editingServiceId: null,
            editBuffer: {},
            addServiceInputs: { name: "", time: "", amount: "" },
            addServiceWarnings: {}
        };

        /* ===== UTILITY ===== */
        function closeUpdateVehicleServiceModal() {
            const modal = document.getElementById('update-vehicle-service-modal');
            modal.classList.add('hidden');
            document.body.classList.remove('overflow-hidden');
        }

        /* ====== MODAL SHOW/ESCAPE HANDLING ====== */
        (function setupModalGlobalEvent() {
            document.addEventListener('keydown', function (e) {
                const modal = document.getElementById('update-vehicle-service-modal');
                if (modal && !modal.classList.contains('hidden')) {
                    if (e.key === "Escape") {
                        closeUpdateVehicleServiceModal();
                    }
                }
            });
        })();

        /* ===== BRAND: Suggestion Dropdown/Keyboard Navigation ===== */
        const brandInput = document.getElementById('brand-input');
        const brandWarning = document.getElementById('brand-warning');
        const brandDropdown = document.getElementById('brand-suggestion-list');
        brandInput.setAttribute("autocomplete", "off");

        /* Event: brand input changes */
        brandInput.addEventListener('input', function (e) {
            state.brand = brandInput.value;
            filterAndShowBrandSuggestions();
            validateBrand();
            populateModelInput();
            updateGetServicesBtn();
        });
        /* Open/close suggestions on focus/blur */
        brandInput.addEventListener('focus', filterAndShowBrandSuggestions);
        brandInput.addEventListener('blur', function () {
            // Delay hiding to allow click on dropdown
            setTimeout(() => { brandDropdown.classList.add('hidden'); }, 200);
        });

        brandInput.addEventListener('keydown', function (e) {
            const suggestions = state.brandDropdown;
            if (suggestions.length === 0) return;
            if (["ArrowDown", "ArrowUp"].includes(e.key)) {
                e.preventDefault();
                if (e.key === "ArrowDown") {
                    state.brandDropdownIndex = (state.brandDropdownIndex + 1) % suggestions.length;
                    updateBrandDropdownHighlight();
                } else if (e.key === "ArrowUp") {
                    state.brandDropdownIndex =
                        (state.brandDropdownIndex - 1 + suggestions.length) % suggestions.length;
                    updateBrandDropdownHighlight();
                }
            } else if (e.key === "Enter") {
                if (state.brandDropdownIndex >= 0 && state.brandDropdown[state.brandDropdownIndex]) {
                    e.preventDefault();
                    selectBrandSuggestion(state.brandDropdown[state.brandDropdownIndex]);
                }
            } else if (e.key === "Escape") {
                brandDropdown.classList.add('hidden');
            }
        });

        function filterAndShowBrandSuggestions() {
            const val = brandInput.value.trim().toLowerCase();
            state.brandDropdown = brands.filter(b => b.toLowerCase().includes(val));
            state.brandDropdownIndex = -1;
            renderBrandDropdown();
            brandInput.setAttribute('aria-expanded', (!brandDropdown.classList.contains('hidden')).toString());
        }
        function renderBrandDropdown() {
            while (brandDropdown.firstChild) brandDropdown.removeChild(brandDropdown.firstChild);
            if (!state.brandDropdown.length || !brandInput.value.trim()) {
                brandDropdown.classList.add('hidden');
                return;
            }
            state.brandDropdown.forEach((b, i) => {
                const item = document.createElement('li');
                item.textContent = b;
                item.setAttribute('role', 'option');
                item.className = "cursor-pointer px-3 py-2 hover:bg-indigo-100 " +
                    (state.brandDropdownIndex === i ? "bg-indigo-100" : "");
                item.onmousedown = function (e) { // use onmousedown to prevent blur firing first
                    e.preventDefault();
                    selectBrandSuggestion(b);
                };
                if (state.brandDropdownIndex === i) item.classList.add("bg-indigo-200");
                brandDropdown.appendChild(item);
            });
            brandDropdown.classList.remove('hidden');
            brandInput.setAttribute('aria-expanded', "true");
        }
        function updateBrandDropdownHighlight() {
            Array.from(brandDropdown.children).forEach((el, i) => {
                el.classList.toggle("bg-indigo-200", state.brandDropdownIndex === i);
            });
        }

        function selectBrandSuggestion(b) {
            brandInput.value = b;
            state.brand = b;
            brandDropdown.classList.add('hidden');
            validateBrand();
            populateModelInput();
            updateGetServicesBtn();
        }
        function closeBrandDropdown() { brandDropdown.classList.add('hidden'); }

        /* Outside click closes dropdowns */
        document.addEventListener('mousedown', function (e) {
            if (!brandDropdown.contains(e.target) && e.target !== brandInput) {
                closeBrandDropdown();
            }
        });

        /* ===== MODEL: Populate, validate ===== */
        const modelInput = document.getElementById("model-input");
        const modelWarning = document.getElementById("model-warning");
        function populateModelInput() {
            modelInput.value = ""; // Reset on brand change
            state.model = "";
            const datalist = document.getElementById("model-list");
            while (datalist.firstChild) datalist.removeChild(datalist.firstChild);

            if (brands.includes(state.brand)) {
                modelInput.removeAttribute("readonly");
                (modelsByBrand[state.brand] || []).forEach(m => {
                    const option = document.createElement("option");
                    option.value = m;
                    datalist.appendChild(option);
                });
            } else {
                modelInput.setAttribute("readonly", true);
            }
        }
        /* Validate model selection and warn if invalid */
        modelInput.addEventListener('input', function () {
            state.model = modelInput.value;
            validateModel();
            updateGetServicesBtn();
        });
        modelInput.addEventListener('focus', function () {
            // show datalist dropdown on focus for better UX
        });

        /* ===== FUEL ===== */
        const fuelInput = document.getElementById('fuel-input');
        const fuelWarning = document.getElementById('fuel-warning');
        fuelInput.addEventListener('change', function () {
            state.fuel = fuelInput.value;
            validateFuel();
            updateGetServicesBtn();
        });

        /* ===== TYPE ===== */
        const typeWarning = document.getElementById('type-warning');
        document.querySelectorAll('input[type="radio"][name="type"]').forEach(radio => {
            radio.addEventListener('change', function () {
                state.type = this.value;
                validateType();
                updateGetServicesBtn();
            });
        });

        /* ===== VALIDATION Routines ===== */
        function validateBrand() {
            if (!brands.includes(state.brand)) {
                brandWarning.textContent = "Please select a valid brand from the suggestions.";
                brandWarning.classList.remove('hidden');
                return false;
            }
            brandWarning.classList.add('hidden');
            return true;
        }
        function validateModel() {
            if (!state.brand || !modelsByBrand[state.brand] || !modelsByBrand[state.brand].includes(state.model)) {
                modelWarning.textContent = "Please select a valid model for the chosen brand.";
                modelWarning.classList.remove('hidden');
                return false;
            }
            modelWarning.classList.add('hidden');
            return true;
        }
        function validateFuel() {
            if (!state.fuel) {
                fuelWarning.textContent = "Please select fuel type.";
                fuelWarning.classList.remove('hidden');
                return false;
            }
            fuelWarning.classList.add('hidden');
            return true;
        }
        function validateType() {
            if (!state.type) {
                typeWarning.textContent = "Please select vehicle type.";
                typeWarning.classList.remove('hidden');
                return false;
            }
            typeWarning.classList.add('hidden');
            return true;
        }

        /* ===== ALL VALID? ===== */
        function isFormValid() {
            return (
                validateBrand() &&
                validateModel() &&
                validateFuel() &&
                validateType()
            );
        }
        function updateGetServicesBtn() {
            document.getElementById('get-services-btn').disabled = !isFormValid();
        }

        /* ====== SERVICES: GET/RENDER/CRUD ====== */
        const getServicesBtn = document.getElementById('get-services-btn');
        const servicesListContainer = document.getElementById('services-list-container');

        getServicesBtn.addEventListener('click', function () {
            // Get base service list
            const key = state.type;
            // LocalStorage: try persistent first
            let services = getPersistedServices(key) || (JSON.parse(JSON.stringify(servicesByType[key])) || []);
            state.services = services;
            renderServices();
        });

        /* Render services list with CRUD actions */
        function renderServices() {
            // If no services, show "No services found."
            let html = "";

            // Add form to add new service
            html += `
  <form id="add-new-service-form" class="bg-gray-50 border border-gray-200 rounded mb-2 p-2 flex flex-col space-y-2">
    <div class="flex flex-row space-x-2">
      <input type="text" class="border p-2 rounded w-1/2" placeholder="Service Name" name="name" value="${state.addServiceInputs.name || ""}">
      <input type="text" class="border p-2 rounded w-1/4" placeholder="Time (e.g., 45 min)" name="time" value="${state.addServiceInputs.time || ""}">
      <input type="number" min="1" class="border p-2 rounded w-1/4" placeholder="Amount (₹)" name="amount" value="${state.addServiceInputs.amount || ""}">
      <button type="submit" class="bg-primary text-white px-3 rounded">Add</button>
    </div>
    <div>
      <span id="add-service-warn-name" class="text-xs text-red-500"></span>
      <span id="add-service-warn-time" class="text-xs text-red-500 ml-4"></span>
      <span id="add-service-warn-amount" class="text-xs text-red-500 ml-4"></span>
    </div>
  </form>`;

            // Services table
            html += `
  <table class="w-full text-left mt-3">
    <thead>
      <tr class="border-b">
        <th class="py-1 px-2 w-2/5">Service Name</th>
        <th class="py-1 px-2 w-1/6">Time</th>
        <th class="py-1 px-2 w-1/6">Amount (₹)</th>
        <th class="py-1 px-2 w-1/5">Actions</th>
      </tr>
    </thead>
    <tbody>
      ${state.services.length === 0
                    ? `<tr><td colspan="4" class="text-center text-gray-400 py-4">No services found.</td></tr>`
                    : state.services.map((srv, idx) => {
                        if (state.editingServiceId === srv.id) {
                            return `
            <tr class="bg-yellow-50 border-b">
              <td class="py-1 px-2">
                <input type="text" value="${state.editBuffer.name || ''}"
                class="border p-1 w-full rounded text-xs" id="edit-srv-name"/>
              </td>
              <td class="py-1 px-2">
                <input type="text" value="${state.editBuffer.time || ''}"
                class="border p-1 w-full rounded text-xs" id="edit-srv-time"/>
              </td>
              <td class="py-1 px-2">
                <input type="number" min="1" value="${state.editBuffer.amount || ''}"
                class="border p-1 w-full rounded text-xs" id="edit-srv-amount"/>
              </td>
              <td class="py-1 px-2 flex flex-row space-x-1">
                <button type="button" class="text-green-700 font-bold" onclick="saveEditService(${srv.id})">Save</button>
                <button type="button" class="text-gray-500" onclick="cancelEditService()">Cancel</button>
              </td>
            </tr>
            <tr>
              <td colspan="4" class="py-0"><span id="edit-service-warn" class="text-xs text-red-500"></span></td>
            </tr>`;
                        }
                        return `
            <tr class="border-b hover:bg-gray-50">
              <td class="py-1 px-2">${srv.name}</td>
              <td class="py-1 px-2">${srv.time}</td>
              <td class="py-1 px-2">${srv.amount}</td>
              <td class="py-1 px-2 flex flex-row space-x-1">
                <button type="button" class="text-indigo-600" onclick="startEditService(${srv.id})">Edit</button>
                <button type="button" class="text-red-600" onclick="deleteServicePrompt(${srv.id})">Delete</button>
              </td>
            </tr>`;
                    }).join('')}
    </tbody>
  </table>`;

            servicesListContainer.innerHTML = html;
            // add event handler for add form
            document.getElementById("add-new-service-form").onsubmit = handleAddNewService;
        }

        /* Add New Service Handler */
        function handleAddNewService(e) {
            e.preventDefault();
            const fields = e.target.elements;
            const name = fields.name.value.trim();
            const time = fields.time.value.trim();
            const amount = fields.amount.value.trim();
            state.addServiceInputs = { name, time, amount };
            let isValid = true;
            // validate
            document.getElementById('add-service-warn-name').textContent = "";
            document.getElementById('add-service-warn-time').textContent = "";
            document.getElementById('add-service-warn-amount').textContent = "";
            if (!name) {
                document.getElementById('add-service-warn-name').textContent = "Name required.";
                isValid = false;
            }
            if (!time) {
                document.getElementById('add-service-warn-time').textContent = "Time required.";
                isValid = false;
            }
            if (!amount || isNaN(amount) || Number(amount) <= 0) {
                document.getElementById('add-service-warn-amount').textContent = "Positive amount required.";
                isValid = false;
            }
            if (!isValid) return false;
            // Add new service
            const newSrv = {
                id: Date.now(), name, time, amount: Number(amount)
            };
            state.services.push(newSrv);
            // LocalStorage: persist
            setPersistedServices(state.type, state.services);
            // TODO: Replace with fetch/POST to backend
            state.addServiceInputs = { name: "", time: "", amount: "" };
            renderServices();
        }

        /* Edit Service (inline) */
        function startEditService(id) {
            const srv = state.services.find(s => s.id === id);
            state.editingServiceId = id;
            state.editBuffer = { ...srv };
            renderServices();
        }
        /* Cancel edit */
        function cancelEditService() {
            state.editingServiceId = null;
            state.editBuffer = {};
            renderServices();
        }

        /* Save Edited Service */
        function saveEditService(id) {
            const name = document.getElementById('edit-srv-name').value.trim();
            const time = document.getElementById('edit-srv-time').value.trim();
            const amount = document.getElementById('edit-srv-amount').value.trim();
            let warn = "";
            if (!name) warn = "Name required.";
            else if (!time) warn = "Time required.";
            else if (!amount || isNaN(amount) || Number(amount) <= 0) warn = "Positive amount required.";
            if (warn) {
                document.getElementById('edit-service-warn').textContent = warn;
                return false;
            }
            const idx = state.services.findIndex(s => s.id === id);
            if (idx >= 0) {
                state.services[idx] = { ...state.services[idx], name, time, amount: Number(amount) };
                setPersistedServices(state.type, state.services);
                // TODO: Replace with fetch/PUT to backend
            }
            state.editingServiceId = null;
            state.editBuffer = {};
            renderServices();
        }

        /* Delete Service w/ confirm */
        function deleteServicePrompt(id) {
            if (window.confirm("Are you sure you want to delete this service?")) {
                state.services = state.services.filter(s => s.id !== id);
                setPersistedServices(state.type, state.services);
                // TODO: Replace with fetch/DELETE to backend
                renderServices();
            }
        }

        /* ====== INIT: Reset on modal show ====== */
        window.showUpdateVehicleServiceModal = function () {
            const modal = document.getElementById('update-vehicle-service-modal');
            modal.classList.remove('hidden');
            document.body.classList.add('overflow-hidden');
            // Reset state
            state = {
                brand: "",
                model: "",
                fuel: "",
                type: "",
                brandDropdown: [],
                brandDropdownIndex: -1,
                modelDropdown: [],
                services: [],
                editingServiceId: null,
                editBuffer: {},
                addServiceInputs: { name: "", time: "", amount: "" },
                addServiceWarnings: {}
            };
            // Reset form
            brandInput.value = "";
            modelInput.value = "";
            modelInput.setAttribute("readonly", true);
            fuelInput.value = "";
            document.querySelectorAll('input[type="radio"][name="type"]').forEach(r => r.checked = false);
            document.getElementById('services-list-container').innerHTML = "";
            updateGetServicesBtn();
        }



    </script> -->

    <script>
document.addEventListener("DOMContentLoaded", () => {
  // Data storage for services (could be fetched from backend)
  let servicesData = [
    // Example structure
    // { id: 1, brand: "Toyota", model: "Camry", fuel: "Petrol", type: "four-wheeler", serviceName: "Oil Change",
    // dateAdded: "2025-01-01", lastDeactivated: "", price: 1500, timeToComplete: 30, active: true }
  ];

  let filteredServices = [...servicesData];
  let currentPageDesktop = 1;
  const rowsPerPageDesktop = 5;
  let currentPageMobile = 1;
  const rowsPerPageMobile = 5;
  let selectedIndexes = [];

  // DOM Elements desktop
  const tableBodyDesktop = document.getElementById("customerTableBodyDesktop");
  const searchInputDesktop = document.getElementById("searchInputDesktop");
  const searchBtnDesktop = document.getElementById("searchBtnDesktop");
  const filterBtnDesktop = document.getElementById("filterBtnDesktop");
  const filterPanelDesktop = document.getElementById("filterPanelDesktop");
  const applyFilterDesktop = document.getElementById("applyFilterDesktop");
  const prevPageDesktop = document.getElementById("prevPageDesktop");
  const nextPageDesktop = document.getElementById("nextPageDesktop");
  const pageInfoDesktop = document.getElementById("pageInfoDesktop");

  // DOM Elements mobile
  const customerListMobile = document.getElementById("customerListMobile");
  const searchInputMobile = document.getElementById("searchInputMobile");
  const searchBtnMobile = document.getElementById("searchBtnMobile");
  const filterBtnMobile = document.getElementById("filterBtnMobile");
  const filterPanelMobile = document.getElementById("filterPanelMobile");
  const applyFilterMobile = document.getElementById("applyFilterMobile");
  const prevPageMobile = document.getElementById("prevPageMobile");
  const nextPageMobile = document.getElementById("nextPageMobile");
  const pageInfoMobile = document.getElementById("pageInfoMobile");

  // Modal elements
  const modal = document.getElementById("customer-modal");
  const modalContent = document.getElementById("modal-content");
  const modalCloseBtn = document.getElementById("modal-close-btn");

  // Form inputs for "Add Service to Vehicle" modal (reuse with edit)
  const addServiceForm = document.getElementById("addServiceForm");
  const brandInput = document.getElementById("brandInput");
  const modelSelect = document.getElementById("modelSelect");
  const fuelSelect = document.getElementById("fuelSelect");
  const vehicleTypeRadios = addServiceForm.elements["vehicleType"];
  const serviceNameInput = document.getElementById("serviceNameInput");
  const timeToCompleteInput = document.getElementById("timeToCompleteInput");
  const priceInput = document.getElementById("priceInput");
  const addServiceSubmitBtn = document.getElementById("addServiceSubmitBtn");

  // State for editing
  let isEditMode = false;
  let editServiceIndex = null;

  // Utility: Format date as YYYY-MM-DD for inputs/display consistency
  function formatDate(dateString) {
    if (!dateString) return "";
    const d = new Date(dateString);
    return d.toISOString().split("T")[0];
  }

  // Render functions

  function renderTableDesktop() {
    const start = (currentPageDesktop - 1) * rowsPerPageDesktop;
    const end = start + rowsPerPageDesktop;
    const pageServices = filteredServices.slice(start, end);

    tableBodyDesktop.innerHTML = "";

    pageServices.forEach((service, idx) => {
      const row = document.createElement("tr");
      // Brand
      row.innerHTML = `
      <td class="border border-gray-300 p-2">${service.brand}</td>
      <td class="border border-gray-300 p-2">${service.model}</td>
      <td class="border border-gray-300 p-2">${service.fuel}</td>
      <td class="border border-gray-300 p-2">${service.type}</td>
      <td class="border border-gray-300 p-2">${service.serviceName}</td>
      <td class="border border-gray-300 p-2">${formatDate(service.dateAdded)}</td>
      <td class="border border-gray-300 p-2">${service.lastDeactivated ? formatDate(service.lastDeactivated) : "-"}</td>
      <td class="border border-gray-300 p-2">${service.price.toFixed(2)}</td>
      <td class="border border-gray-300 p-2">${service.timeToComplete}</td>
      <td class="border border-gray-300 p-2 text-center space-x-2">
        <button class="text-blue-600 hover:underline edit-btn" data-index="${start + idx}">Edit</button>
        <button class="text-red-600 hover:underline deactivate-btn" data-index="${start + idx}">${service.active ? "Deactivate" : "Activate"}</button>
      </td>
      `;
      tableBodyDesktop.appendChild(row);
    });

    pageInfoDesktop.textContent = `Page ${currentPageDesktop} of ${Math.ceil(filteredServices.length / rowsPerPageDesktop)}`;
    prevPageDesktop.disabled = currentPageDesktop === 1;
    nextPageDesktop.disabled = currentPageDesktop === Math.ceil(filteredServices.length / rowsPerPageDesktop);

    attachTableEventListeners();
  }

  function renderListMobile() {
    const start = (currentPageMobile - 1) * rowsPerPageMobile;
    const end = start + rowsPerPageMobile;
    const pageServices = filteredServices.slice(start, end);

    customerListMobile.innerHTML = "";

    pageServices.forEach((service, idx) => {
      const div = document.createElement("div");
      div.className = "border border-gray-300 rounded p-3 space-y-1";

      div.innerHTML = `
        <div><strong>Brand:</strong> ${service.brand}</div>
        <div><strong>Model:</strong> ${service.model}</div>
        <div><strong>Fuel:</strong> ${service.fuel}</div>
        <div><strong>Type:</strong> ${service.type}</div>
        <div><strong>Service:</strong> ${service.serviceName}</div>
        <div><strong>Date Added:</strong> ${formatDate(service.dateAdded)}</div>
        <div><strong>Last Deactivated:</strong> ${service.lastDeactivated ? formatDate(service.lastDeactivated) : "-"}</div>
        <div><strong>Price:</strong> ${service.price.toFixed(2)}</div>
        <div><strong>Time (min):</strong> ${service.timeToComplete}</div>
        <div class="space-x-2 mt-2 text-center">
          <button class="text-blue-600 underline text-sm edit-btn" data-index="${start + idx}">Edit</button>
          <button class="text-red-600 underline text-sm deactivate-btn" data-index="${start + idx}">${service.active ? "Deactivate" : "Activate"}</button>
        </div>
      `;

      customerListMobile.appendChild(div);
    });

    pageInfoMobile.textContent = `Page ${currentPageMobile} of ${Math.ceil(filteredServices.length / rowsPerPageMobile)}`;
    prevPageMobile.disabled = currentPageMobile === 1;
    nextPageMobile.disabled = currentPageMobile === Math.ceil(filteredServices.length / rowsPerPageMobile);

    attachListEventListeners();
  }

  // Pagination
  prevPageDesktop.addEventListener("click", () => {
    if (currentPageDesktop > 1) {
      currentPageDesktop--;
      renderTableDesktop();
    }
  });

  nextPageDesktop.addEventListener("click", () => {
    if (currentPageDesktop < Math.ceil(filteredServices.length / rowsPerPageDesktop)) {
      currentPageDesktop++;
      renderTableDesktop();
    }
  });

  prevPageMobile.addEventListener("click", () => {
    if (currentPageMobile > 1) {
      currentPageMobile--;
      renderListMobile();
    }
  });

  nextPageMobile.addEventListener("click", () => {
    if (currentPageMobile < Math.ceil(filteredServices.length / rowsPerPageMobile)) {
      currentPageMobile++;
      renderListMobile();
    }
  });

  // Search and Filter toggling and applying
  filterBtnDesktop.addEventListener("click", (e) => {
    e.stopPropagation();
    filterPanelDesktop.classList.toggle("hidden");
  });

  filterBtnMobile.addEventListener("click", (e) => {
    e.stopPropagation();
    filterPanelMobile.classList.toggle("hidden");
  });

  document.addEventListener("click", (e) => {
    if (!filterPanelDesktop.contains(e.target) && !filterBtnDesktop.contains(e.target)) {
      filterPanelDesktop.classList.add("hidden");
    }
    if (!filterPanelMobile.contains(e.target) && !filterBtnMobile.contains(e.target)) {
      filterPanelMobile.classList.add("hidden");
    }
  });

  // Helper for validation
  function validateForm() {
    let valid = true;

    // Brand validation: not empty
    if (!brandInput.value.trim()) {
      showError("brandError");
      valid = false;
    } else {
      hideError("brandError");
    }

    // Model validation: must be selected (not empty)
    if (!modelSelect.value.trim()) {
      showError("modelError");
      valid = false;
    } else {
      hideError("modelError");
    }

    // Fuel validation
    if (!fuelSelect.value.trim()) {
      showError("fuelError");
      valid = false;
    } else {
      hideError("fuelError");
    }

    // Vehicle type validation
    let typeSelected = false;
    for (let radio of vehicleTypeRadios) {
      if (radio.checked) {
        typeSelected = true;
        break;
      }
    }
    if (!typeSelected) {
      showError("typeError");
      valid = false;
    } else {
      hideError("typeError");
    }

    // Service Name validation
    if (!serviceNameInput.value.trim()) {
      showError("serviceError");
      valid = false;
    } else {
      hideError("serviceError");
    }

    // Time to complete validation (number, > 0)
    const timeVal = parseInt(timeToCompleteInput.value, 10);
    if (isNaN(timeVal) || timeVal < 1) {
      showError("timeError");
      valid = false;
    } else {
      hideError("timeError");
    }

    // Price validation (number, >= 0)
    const priceVal = parseFloat(priceInput.value);
    if (isNaN(priceVal) || priceVal < 0) {
      showError("priceError");
      valid = false;
    } else {
      hideError("priceError");
    }

    addServiceSubmitBtn.disabled = !valid;
    return valid;
  }

  function showError(id) {
    const el = document.getElementById(id);
    if (el) el.classList.remove("hidden");
  }
  function hideError(id) {
    const el = document.getElementById(id);
    if (el) el.classList.add("hidden");
  }

  // Update model select options when brand changes (populate with mock models)
  brandInput.addEventListener("input", () => {
    // Example: Populate models based on brand - simple demo
    const brand = brandInput.value.trim().toLowerCase();
    const modelsByBrand = {
      toyota: ["Camry", "Corolla", "RAV4"],
      honda: ["Civic", "Accord", "CBR500R"],
      tesla: ["Model 3", "Model S", "Model X"],
      yamaha: ["R15", "FZ", "MT-15"],
      ford: ["Mustang", "F-150", "Explorer"],
    };

    modelSelect.innerHTML = "";
    if (brand && modelsByBrand[brand]) {
      modelsByBrand[brand].forEach(m => {
        const option = document.createElement("option");
        option.value = m;
        option.textContent = m;
        modelSelect.appendChild(option);
      });
      modelSelect.disabled = false;
    } else {
      const option = document.createElement("option");
      option.value = "";
      option.textContent = "Select brand first";
      modelSelect.appendChild(option);
      modelSelect.disabled = true;
    }
    validateForm();
  });

  // Enable/disable dependent inputs based on brand selection
  brandInput.addEventListener("input", () => {
    const hasBrand = brandInput.value.trim() !== "";
    fuelSelect.disabled = !hasBrand;
    vehicleTypeRadios.forEach(radio => radio.disabled = !hasBrand);
    serviceNameInput.disabled = !hasBrand;
    timeToCompleteInput.disabled = !hasBrand;
    priceInput.disabled = !hasBrand;
    addServiceSubmitBtn.disabled = true;
  });

  // Validate form on input changes
  [brandInput, modelSelect, fuelSelect, serviceNameInput, timeToCompleteInput, priceInput].forEach(el => {
    el.addEventListener("input", validateForm);
  });
  vehicleTypeRadios.forEach(r => r.addEventListener("change", validateForm));

  // Search handlers - filter services based on search input (simple text match)
  function applyFilters() {
    const searchDesktopVal = searchInputDesktop.value.trim().toLowerCase();
    const searchMobileVal = searchInputMobile.value.trim().toLowerCase();

    filteredServices = servicesData.filter(svc => {
      const combined = [
        svc.brand,
        svc.model,
        svc.fuel,
        svc.type,
        svc.serviceName
      ].join(" ").toLowerCase();

      return (
        combined.includes(searchDesktopVal) ||
        combined.includes(searchMobileVal)
      );
    });

    currentPageDesktop = 1;
    currentPageMobile = 1;
    renderTableDesktop();
    renderListMobile();
  }

  searchBtnDesktop.addEventListener("click", () => {
    applyFilters();
  });
  searchBtnMobile.addEventListener("click", () => {
    applyFilters();
  });

  // Pagination also triggered by pressing Enter in search inputs
  searchInputDesktop.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
      e.preventDefault();
      applyFilters();
    }
  });
  searchInputMobile.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
      e.preventDefault();
      applyFilters();
    }
  });

  // Filter apply button (desktop/mobile) - currently filters only by search
  applyFilterDesktop.addEventListener("click", () => {
    filterPanelDesktop.classList.add("hidden");
    applyFilters();
  });
  applyFilterMobile.addEventListener("click", () => {
    filterPanelMobile.classList.add("hidden");
    applyFilters();
  });

  // Attach event listeners to table buttons (edit / deactivate)
  function attachTableEventListeners() {
    const editButtons = tableBodyDesktop.querySelectorAll(".edit-btn");
    const deactivateButtons = tableBodyDesktop.querySelectorAll(".deactivate-btn");

    editButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        const index = parseInt(btn.getAttribute("data-index"));
        openEditModal(index);
      });
    });

    deactivateButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        const index = parseInt(btn.getAttribute("data-index"));
        toggleServiceActivation(index);
      });
    });
  }

  // Attach event listeners to mobile list buttons
  function attachListEventListeners() {
    const editButtons = customerListMobile.querySelectorAll(".edit-btn");
    const deactivateButtons = customerListMobile.querySelectorAll(".deactivate-btn");

    editButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        const index = parseInt(btn.getAttribute("data-index"));
        openEditModal(index);
      });
    });

    deactivateButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        const index = parseInt(btn.getAttribute("data-index"));
        toggleServiceActivation(index);
      });
    });
  }

  // Edit modal open
  function openEditModal(index) {
    isEditMode = true;
    editServiceIndex = index;
    const service = filteredServices[index];

    // Fill in form fields
    brandInput.value = service.brand;
    // Populate model select for brand
    const event = new Event('input');
    brandInput.dispatchEvent(event);
    modelSelect.value = service.model;
    fuelSelect.value = service.fuel;

    for (let radio of vehicleTypeRadios) {
      radio.checked = radio.value === service.type;
    }

    serviceNameInput.value = service.serviceName;
    timeToCompleteInput.value = service.timeToComplete;
    priceInput.value = service.price.toFixed(2);

    // Enable inputs
    brandInput.disabled = false;
    modelSelect.disabled = false;
    fuelSelect.disabled = false;
    vehicleTypeRadios.forEach(r => r.disabled = false);
    serviceNameInput.disabled = false;
    timeToCompleteInput.disabled = false;
    priceInput.disabled = false;

    addServiceSubmitBtn.disabled = true; // wait for validation
    validateForm();

    // Show modal
    modal.classList.remove("hidden");
  }

  // Deactivate or Activate service
  function toggleServiceActivation(index) {
    const service = filteredServices[index];
    if (!service) return;

    if (service.active) {
      // Confirm deactivate
      if (confirm(`Deactivate service "${service.serviceName}" for ${service.brand} ${service.model}?`)) {
        service.active = false;
        if (!service.lastDeactivated) {
          service.lastDeactivated = new Date().toISOString();
        }
      }
    } else {
      // Confirm activate
      if (confirm(`Activate service "${service.serviceName}" for ${service.brand} ${service.model}?`)) {
        service.active = true;
      }
    }

    renderTableDesktop();
    renderListMobile();
  }

  // Close modal logic
  modalCloseBtn.addEventListener("click", () => {
    closeModal();
  });
  modal.addEventListener("click", (e) => {
    if (e.target === modal) {
      closeModal();
    }
  });

  function closeModal() {
    modal.classList.add("hidden");
    clearEditForm();
  }

  // On submitting add/edit service form (only used for edit here)
  addServiceForm.addEventListener("submit", (e) => {
    e.preventDefault();
    if (!validateForm()) return;

    // Save changes for edit mode
    if (isEditMode && editServiceIndex !== null) {
      let svc = filteredServices[editServiceIndex];
      // Also update the main data array (find by id)
      const originalIndex = servicesData.findIndex(item => item === svc);
      if (originalIndex !== -1) {
        servicesData[originalIndex].price = parseFloat(priceInput.value);
        servicesData[originalIndex].timeToComplete = parseInt(timeToCompleteInput.value, 10);
      }

      // Update filteredServices copy
      svc.price = parseFloat(priceInput.value);
      svc.timeToComplete = parseInt(timeToCompleteInput.value, 10);

      closeModal();
      renderTableDesktop();
      renderListMobile();
    }
  });

  // Clear edit form and disable inputs
  function clearEditForm() {
    isEditMode = false;
    editServiceIndex = null;

    addServiceForm.reset();
    modelSelect.disabled = true;
    fuelSelect.disabled = true;
    vehicleTypeRadios.forEach(r => r.disabled = true);
    serviceNameInput.disabled = true;
    timeToCompleteInput.disabled = true;
    priceInput.disabled = true;
    addServiceSubmitBtn.disabled = true;

    ["brandError", "modelError", "fuelError", "typeError", "serviceError", "timeError", "priceError"].forEach(id => {
      hideError(id);
    });
  }

  // Initialization function that sets up everything
  function init() {
    // For demonstration, initial data can be filled here or fetched from backend.
    servicesData = [
      {
        id: 1, brand: "Toyota", model: "Camry", fuel: "Petrol", type: "four-wheeler", serviceName: "Oil Change",
        dateAdded: "2023-01-15", lastDeactivated: "", price: 1500, timeToComplete: 30, active: true
      },
      {
        id: 2, brand: "Honda", model: "CBR500R", fuel: "Petrol", type: "two-wheeler", serviceName: "Engine Tune-up",
        dateAdded: "2023-05-20", lastDeactivated: "", price: 1200, timeToComplete: 45, active: true
      },
      {
        id: 3, brand: "Tesla", model: "Model 3", fuel: "EV", type: "four-wheeler", serviceName: "Battery Health Check",
        dateAdded: "2024-03-10", lastDeactivated: "2025-01-01", price: 3000, timeToComplete: 60, active: false
      },
      {
        id: 4, brand: "Yamaha", model: "R15", fuel: "Petrol", type: "two-wheeler", serviceName: "Brake Replacement",
        dateAdded: "2022-11-05", lastDeactivated: "", price: 900, timeToComplete: 50, active: true
      }
    ];
    filteredServices = [...servicesData];

    currentPageDesktop = 1;
    currentPageMobile = 1;
    renderTableDesktop();
    renderListMobile();
  }

  init();
});
</script>

</body>

</html>