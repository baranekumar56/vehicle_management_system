<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Service Management - Backup & Restore</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#241358',
                    },
                },
            },
        };
    </script>
    <style>
        .toast {
            transition: all 0.3s ease;
        }
        .progress-bar {
            transition: width 0.3s ease;
        }
    </style>
</head>

<body class="bg-gray-50 min-h-screen">
    <div id="sidebar-root"></div>
    <div id="navbar-root"></div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed top-20 right-4 z-50 hidden">
        <div class="bg-white border border-gray-200 rounded-lg shadow-lg p-4 max-w-sm">
            <div class="flex items-center">
                <div id="toast-icon" class="flex-shrink-0 w-6 h-6 mr-3"></div>
                <div>
                    <p id="toast-message" class="text-sm font-medium text-gray-900"></p>
                </div>
                <button id="toast-close" class="ml-4 text-gray-400 hover:text-gray-600">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Progress Bar -->
    <div id="progress-container" class="fixed top-0 left-0 w-full z-50 hidden">
        <div class="bg-gray-200 h-1">
            <div id="progress-bar" class="progress-bar bg-primary h-1" style="width: 0%"></div>
        </div>
    </div>

    <!-- Mobile Backup Details Modal -->
    <div id="backup-details-modal"
        class="fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-lg w-full max-w-md max-h-full flex flex-col overflow-hidden relative">
            <button id="details-modal-close-btn" aria-label="Close modal"
                class="absolute top-4 right-4 text-gray-600 hover:text-gray-900 focus:outline-none z-10">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" stroke="currentColor"
                    viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18" />
                    <line x1="6" y1="6" x2="18" y2="18" />
                </svg>
            </button>
            <div id="details-modal-content" class="p-6 overflow-auto flex-grow"></div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="bg-gray-100 pt-[70px] lg:pt-0 px-2 lg:ml-[250px] sm:px-4 transition-all duration-300 min-h-screen overflow-y-auto" tabindex="0">

        <!-- Desktop View -->
        <section id="desktop-content" class="hidden sm:block">
            <h1 class="text-2xl font-bold mb-2 pb-8">Backup & Restore</h1>
            
            <!-- Backup Settings Card -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6 max-w-4xl mx-auto">
                <h2 class="text-xl font-semibold mb-4">Backup Settings</h2>
                
                <!-- Auto/Manual Toggle -->
                <div class="mb-6">
                    <div class="flex items-center space-x-4">
                        <label class="flex items-center">
                            <input type="radio" name="backup-mode" value="auto" id="auto-mode" class="text-primary focus:ring-primary" checked>
                            <span class="ml-2 text-sm font-medium">Auto Schedule</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="backup-mode" value="manual" id="manual-mode" class="text-primary focus:ring-primary">
                            <span class="ml-2 text-sm font-medium">Manual</span>
                        </label>
                    </div>
                </div>

                <!-- Auto Schedule Options -->
                <div id="auto-options" class="mb-6">
                    <h3 class="text-lg font-medium mb-3">Schedule Frequency</h3>
                    <div class="flex flex-wrap gap-4 mb-4">
                        <label class="flex items-center">
                            <input type="radio" name="schedule-frequency" value="daily" id="daily-schedule" class="text-primary focus:ring-primary" checked>
                            <span class="ml-2 text-sm">Daily</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="schedule-frequency" value="weekly" id="weekly-schedule" class="text-primary focus:ring-primary">
                            <span class="ml-2 text-sm">Weekly</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="schedule-frequency" value="monthly" id="monthly-schedule" class="text-primary focus:ring-primary">
                            <span class="ml-2 text-sm">Monthly</span>
                        </label>
                    </div>
                    <button id="schedule-btn" class="px-6 py-2 bg-primary text-white rounded-lg hover:bg-purple-800 font-semibold">
                        Schedule Backup
                    </button>
                </div>

                <!-- Manual Backup Option -->
                <div id="manual-options" class="mb-6 hidden">
                    <h3 class="text-lg font-medium mb-3">Manual Backup</h3>
                    <button id="backup-now-btn" class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold">
                        Backup Now
                    </button>
                </div>
            </div>

            <!-- Backup History -->
            <div class="flex justify-center p-4">
                <div class="overflow-x-auto w-full max-w-7xl">
                    <h2 class="text-xl font-semibold mb-4">Backup History</h2>
                    <div class="flex justify-center">
                        <table class="min-w-[800px] w-full table-auto border border-gray-300 bg-white shadow-sm rounded-md">
                            <thead class="bg-gray-200 text-gray-700 text-sm">
                                <tr>
                                    <th class="py-2 px-4 border border-gray-300 text-left">Version</th>
                                    <th class="py-2 px-4 border border-gray-300 text-left">Date</th>
                                    <th class="py-2 px-4 border border-gray-300 text-left">Time</th>
                                    <th class="py-2 px-4 border border-gray-300 text-left">Size</th>
                                    <th class="py-2 px-4 border border-gray-300 text-left">Type</th>
                                    <th class="py-2 px-4 border border-gray-300 text-left">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="backupTableBodyDesktop" class="text-sm"></tbody>
                        </table>
                    </div>

                    <div class="flex justify-between items-center mt-4 text-sm text-gray-600 max-w-7xl mx-auto px-2 select-none">
                        <button id="prevPageDesktop" class="disabled:opacity-50 px-3 py-1 rounded border border-gray-300 hover:bg-gray-100" aria-label="Previous page">← Previous</button>
                        <span id="pageInfoDesktop"></span>
                        <button id="nextPageDesktop" class="disabled:opacity-50 px-3 py-1 rounded border border-gray-300 hover:bg-gray-100" aria-label="Next page">Next →</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Mobile View -->
        <section class="sm:hidden">
            <h1 class="text-xl font-bold mb-4 px-4">Backup & Restore</h1>
            
            <!-- Mobile Backup Settings -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-4 mx-4">
                <h2 class="text-lg font-semibold mb-4">Backup Settings</h2>
                
                <!-- Auto/Manual Toggle -->
                <div class="mb-4">
                    <div class="flex items-center space-x-4">
                        <label class="flex items-center">
                            <input type="radio" name="backup-mode-mobile" value="auto" id="auto-mode-mobile" class="text-primary focus:ring-primary" checked>
                            <span class="ml-2 text-sm font-medium">Auto Schedule</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="backup-mode-mobile" value="manual" id="manual-mode-mobile" class="text-primary focus:ring-primary">
                            <span class="ml-2 text-sm font-medium">Manual</span>
                        </label>
                    </div>
                </div>

                <!-- Auto Schedule Options Mobile -->
                <div id="auto-options-mobile" class="mb-4">
                    <h3 class="text-base font-medium mb-3">Schedule Frequency</h3>
                    <div class="flex flex-col gap-2 mb-4">
                        <label class="flex items-center">
                            <input type="radio" name="schedule-frequency-mobile" value="daily" id="daily-schedule-mobile" class="text-primary focus:ring-primary" checked>
                            <span class="ml-2 text-sm">Daily</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="schedule-frequency-mobile" value="weekly" id="weekly-schedule-mobile" class="text-primary focus:ring-primary">
                            <span class="ml-2 text-sm">Weekly</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="schedule-frequency-mobile" value="monthly" id="monthly-schedule-mobile" class="text-primary focus:ring-primary">
                            <span class="ml-2 text-sm">Monthly</span>
                        </label>
                    </div>
                    <button id="schedule-btn-mobile" class="w-full px-4 py-2 bg-primary text-white rounded-lg hover:bg-purple-800 font-semibold">
                        Schedule Backup
                    </button>
                </div>

                <!-- Manual Backup Option Mobile -->
                <div id="manual-options-mobile" class="mb-4 hidden">
                    <h3 class="text-base font-medium mb-3">Manual Backup</h3>
                    <button id="backup-now-btn-mobile" class="w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold">
                        Backup Now
                    </button>
                </div>
            </div>

            <!-- Mobile Backup History -->
            <div class="px-4">
                <h2 class="text-lg font-semibold mb-2">Backup History</h2>
                <div id="backupListMobile" class="space-y-3"></div>
                <div class="flex justify-between items-center mt-4 text-sm text-gray-600 select-none">
                    <button id="prevPageMobile" class="disabled:opacity-50 px-3 py-1 rounded border border-gray-300 hover:bg-gray-100" aria-label="Previous page">← Previous</button>
                    <span id="pageInfoMobile"></span>
                    <button id="nextPageMobile" class="disabled:opacity-50 px-3 py-1 rounded border border-gray-300 hover:bg-gray-100" aria-label="Next page">Next →</button>
                </div>
            </div>
        </section>

    </main>
    <script type="module" src="/components/components-loader.js"></script>
    <script type="module" src="backup-restore.js"></script>

</body>

</html>