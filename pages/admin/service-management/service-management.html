<!DOCTYPE html>
<html lang="en" class="langen">

<head>
    <meta charset="UTF-8" />
    <title>Service Management - Vehicle Services</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .primary {
            background-color: #241358;
        }
    </style>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: "#241358",
                        "primary-dark": "#1b0e29",
                        "primary-light": "#452d68",
                        "primary-lighter": "#6e578d",
                        "primary-transparent": "rgba(36,19,88,0.1)"
                    }
                }
            }
        };
    </script>

    <style>
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }

        ul.suggestion-list {
            position: absolute;
            z-index: 60;
            background: white;
            border: 1px solid #CBD5E0;
            border-radius: 0.375rem;
            max-height: 10rem;
            overflow-y: auto;
            width: 100%;
        }

        .animate-bounce-in {
            animation: bounce-in 0.25s ease forwards;
        }

        @keyframes bounce-in {
            0% {
                opacity: 0;
                transform: scale(0.8);
            }

            100% {
                opacity: 1;
                transform: scale(1);
            }
        }
    </style>
</head>

<body class="bg-gray-50 min-h-screen">

    <!-- Sidebar and Navbar -->
    <div id="sidebar-root"></div>
    <div id="navbar-root"></div>

    <main
        class="bg-gray-100 pt-[70px] sm:pt-6 px-2 sm:px-4 lg:ml-[250px] transition-all duration-300 min-h-screen overflow-y-auto"
        tabindex="0">
            <h1 class="text-2xl font-bold mb-2 pb-8">Vehicle Services</h1>

        <!-- Desktop View -->
        <section id="desktop-content" class="hidden sm:block">

            <div class="flex justify-between mb-6 relative">
                <div>
                    <button id="openAddServiceModalBtn" class="p-4 outline-none shadow bg-white rounded ml-4">
                        Add Service to Vehicle
                    </button>

                </div>

                <div class="flex items-center gap-2 w-full max-w-lg bg-white shadow rounded-lg px-3 py-2 relative">
                    <input type="text" id="searchInputDesktop" placeholder="Search services..."
                        class="flex-grow outline-none border-none focus:ring-0 text-sm px-2" />
                    <button id="searchBtnDesktop" class="p-2 rounded-md hover:bg-gray-100" aria-label="Search">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-600" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 1110.5 3a7.5 7.5 0 016.15 13.65z" />
                        </svg>
                    </button>
                    <button id="filterBtnDesktop" class="p-2 rounded-md hover:bg-gray-100"
                        aria-label="Toggle filter panel">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                            stroke="currentColor" class="w-5 h-5 text-gray-600">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3 4h18M6 10h12M9 16h6M11 20h2" />
                        </svg>
                    </button>

                    <!-- Desktop Filter Panel -->
                    <div id="filterPanelDesktop"
                        class="hidden absolute top-14 right-0 z-50 bg-white rounded-xl shadow-2xl scale-105 animate-bounce-in px-6 py-4 transition-all duration-300 min-w-[320px]">
                        <h3 class="text-lg font-semibold mb-4">Filters</h3>
                        <form id="filterFormDesktop" class="space-y-4">
                            <div>
                                <label for="filterDateFromDesktop" class="text-sm block mb-1">Date Added From</label>
                                <input type="date" id="filterDateFromDesktop" name="dateFrom"
                                    class="w-full border rounded px-2 py-1" />
                            </div>
                            <div>
                                <label for="filterDateToDesktop" class="text-sm block mb-1">Date Added To</label>
                                <input type="date" id="filterDateToDesktop" name="dateTo"
                                    class="w-full border rounded px-2 py-1" />
                            </div>
                            <div>
                                <label for="filterPriceOpDesktop" class="text-sm block mb-1">Price Op</label>
                                <select id="filterPriceOpDesktop" name="priceOp"
                                    class="w-full border rounded px-2 py-1">
                                    <option value="option">Option</option>
                                    <option value="=">=</option>
                                    <option value="<">&lt;</option>
                                    <option value=">">&gt;</option>
                                </select>
                            </div>
                            <div>
                                <label for="filterPriceDesktop" class="text-sm block mb-1">Price</label>
                                <input type="number" min="0" step="0.01" id="filterPriceDesktop" name="price"
                                    placeholder="Amount" class="w-full border rounded px-2 py-1" />
                            </div>
                            <div>
                                <label for="filterTimeOpDesktop" class="text-sm block mb-1">Time Op</label>
                                <select id="filterTimeOpDesktop" name="timeOp" class="w-full border rounded px-2 py-1">
                                    <option value="option">Option</option>
                                    <option value="=">=</option>
                                    <option value="<">&lt;</option>
                                    <option value=">">&gt;</option>
                                </select>
                            </div>
                            <div>
                                <label for="filterTimeDesktop" class="text-sm block mb-1">Time (min)</label>
                                <input type="number" min="0" id="filterTimeDesktop" name="time" placeholder="Minutes"
                                    class="w-full border rounded px-2 py-1" />
                            </div>
                            <div>
                                <label for="filterFuelDesktop" class="text-sm block mb-1">Fuel</label>
                                <select id="filterFuelDesktop" name="fuel" class="w-full border rounded px-2 py-1">
                                    <option value="All">All</option>
                                    <option value="Petrol">Petrol</option>
                                    <option value="Diesel">Diesel</option>
                                    <option value="EV">EV</option>
                                    <option value="Hybrid">Hybrid</option>
                                    <option value="CNG">CNG</option>
                                </select>
                            </div>
                            <div>
                                <label for="filterTypeDesktop" class="text-sm block mb-1">Vehicle Type</label>
                                <select id="filterTypeDesktop" name="type" class="w-full border rounded px-2 py-1">
                                    <option value="All">All</option>
                                    <option value="two-wheeler">Two-Wheeler</option>
                                    <option value="four-wheeler">Four-Wheeler</option>
                                </select>
                            </div>
                            <button type="submit"
                                class="w-full mt-2 px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700">
                                Apply Filter
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="flex ml-4 mb-4 gap-6">
                <div class="p-3 outline-none shadow rounded-sm bg-white text-sm"><a href="./vehicles.html">Add /
                        Deactivate Vehicles</a></div>
                <div class="p-3 outline-none shadow rounded-sm bg-white text-sm"><a href="./services.html">Add /
                        Deactivate Services</a></div>
            </div>

            <!-- Batch Action Buttons -->
            <div class="flex space-x-2 mb-4 ml-4">
                <button id="batchDeactivateDesktop" disabled
                    class="bg-red-600 text-white px-3 py-1 rounded disabled:opacity-60">
                    Deactivate Selected
                </button>
                <button id="batchActivateDesktop" disabled
                    class="bg-green-600 text-white px-3 py-1 rounded disabled:opacity-60">
                    Activate Selected
                </button>
            </div>

            <div class="flex justify-center p-10">
                <div class="overflow-x-auto w-full max-w-7xl">
                    <h2 class="text-xl font-semibold mb-2">Service Info</h2>
                    <div class="flex justify-center">
                        <table
                            class="min-w-[1000px] w-full table-auto border border-gray-300 bg-white shadow-sm rounded-md">
                            <thead class="bg-gray-100 text-gray-700 text-sm">
                                <tr>
                                    <th class="py-2 px-3 border border-gray-300 text-left =">
                                        <input type="checkbox" id="selectAllDesktop" />
                                    </th>
                                    <th class="py-2 px-4 border border-gray-300 text-left ">Brand</th>
                                    <th class="py-2 px-4 border border-gray-300 text-left ">Model</th>
                                    <th class="py-2 px-4 border border-gray-300 text-left">Fuel</th>
                                    <th class="py-2 px-4 border border-gray-300 text-left">Type</th>
                                    <th class="py-2 px-4 border border-gray-300 text-left">Service Name</th>
                                    <th class="py-2 px-4 border border-gray-300 text-left">Date Added</th>
                                    <th class="py-2 px-4 border border-gray-300 text-left">Last Deactivated</th>
                                    <th class="py-2 px-4 border border-gray-300 text-left">Price</th>
                                    <th class="py-2 px-4 border border-gray-300 text-left">Time to Complete (min)</th>
                                    <th class="py-2 px-4 border border-gray-300 text-left">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="servicesTableBodyDesktop" class="text-sm"></tbody>
                        </table>
                    </div>

                    <div
                        class="flex justify-between items-center mt-4 text-sm text-gray-600 max-w-7xl mx-auto px-2 select-none">
                        <button id="prevPageDesktop" class="disabled:opacity-50" aria-label="Previous page">←
                            Previous</button>
                        <span id="pageInfoDesktop"></span>
                        <button id="nextPageDesktop" class="disabled:opacity-50" aria-label="Next page">Next
                            →</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Mobile View -->
        <section class="sm:hidden">
            <div class="relative mb-4 px-4 flex items-center gap-2">
                <div class="flex items-center w-full relative">
                    <input type="text" id="searchInputMobile"
                        class="w-full rounded-full px-4 pr-12 shadow-sm outline-none py-3"
                        placeholder="Search services..." aria-label="Search services" />
                    <button id="searchBtnMobile"
                        class="absolute right-2 top-[6px] bg-white rounded-full p-2 shadow hover:bg-gray-100"
                        aria-label="Search">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 1110.5 3a7.5 7.5 0 016.15 13.65z" />
                        </svg>
                    </button>
                </div>
                <label class="inline-flex items-center space-x-2 cursor-pointer select-none">
                    <input type="checkbox" id="select-all-filtered-data" class="form-checkbox h-5 w-5 text-primary" />
                    <span class="text-gray-700 text-sm">Select All</span>
                </label>
            </div>

            <div class="flex justify-end px-4 relative mb-4">
                <button id="filterBtnMobile" class="bg-white rounded-full p-2 shadow hover:bg-gray-100"
                    aria-label="Toggle filter mobile">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-gray-600" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M3 4h18l-7 8v6l-4 2v-8z" />
                    </svg>
                </button>
                <div id="filterPanelMobile"
                    class="hidden absolute top-12 right-0 z-50 bg-white rounded-xl shadow-2xl scale-105 animate-bounce-in px-6 py-4 transition-all duration-300 min-w-[300px]">
                    <h3 class="text-lg font-semibold mb-4">Filters</h3>
                    <form id="filterFormMobile" class="space-y-4">
                        <div>
                            <label for="filterDateFromMobile" class="text-sm block mb-1">Date Added From</label>
                            <input type="date" id="filterDateFromMobile" name="dateFrom"
                                class="w-full border rounded px-2 py-1" />
                        </div>
                        <div>
                            <label for="filterDateToMobile" class="text-sm block mb-1">Date Added To</label>
                            <input type="date" id="filterDateToMobile" name="dateTo"
                                class="w-full border rounded px-2 py-1" />
                        </div>
                        <div>
                            <label for="filterPriceOpMobile" class="text-sm block mb-1">Price Op</label>
                            <select id="filterPriceOpMobile" name="priceOp" class="w-full border rounded px-2 py-1">
                                <option value="option">Option</option>
                                <option value="=">=</option>
                                <option value="<">&lt;</option>
                                <option value=">">&gt;</option>
                            </select>
                        </div>
                        <div>
                            <label for="filterPriceMobile" class="text-sm block mb-1">Price</label>
                            <input type="number" min="0" step="0.01" id="filterPriceMobile" name="price"
                                placeholder="Amount" class="w-full border rounded px-2 py-1" />
                        </div>
                        <div>
                            <label for="filterTimeOpMobile" class="text-sm block mb-1">Time Op</label>
                            <select id="filterTimeOpMobile" name="timeOp" class="w-full border rounded px-2 py-1">
                                <option value="option">Option</option>
                                <option value="=">=</option>
                                <option value="<">&lt;</option>
                                <option value=">">&gt;</option>
                            </select>
                        </div>
                        <div>
                            <label for="filterTimeMobile" class="text-sm block mb-1">Time (min)</label>
                            <input type="number" min="0" id="filterTimeMobile" name="time" placeholder="Minutes"
                                class="w-full border rounded px-2 py-1" />
                        </div>
                        <div>
                            <label for="filterFuelMobile" class="text-sm block mb-1">Fuel</label>
                            <select id="filterFuelMobile" name="fuel" class="w-full border rounded px-2 py-1">
                                <option value="All">All</option>
                                <option value="Petrol">Petrol</option>
                                <option value="Diesel">Diesel</option>
                                <option value="EV">EV</option>
                                <option value="Hybrid">Hybrid</option>
                                <option value="CNG">CNG</option>
                            </select>
                        </div>
                        <div>
                            <label for="filterTypeMobile" class="text-sm block mb-1">Vehicle Type</label>
                            <select id="filterTypeMobile" name="type" class="w-full border rounded px-2 py-1">
                                <option value="All">All</option>
                                <option value="two-wheeler">Two-Wheeler</option>
                                <option value="four-wheeler">Four-Wheeler</option>
                            </select>
                        </div>
                        <button type="submit"
                            class="w-full mt-2 px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700">
                            Apply Filter
                        </button>
                    </form>
                </div>
            </div>

            <!-- Mobile Batch Actions -->
            <div class="flex space-x-2 mb-2 px-4">
                <button id="batchActivateMobile"
                    class="bg-green-600 text-white px-3 py-1 rounded disabled:opacity-60 text-xs">
                    Activate Selected
                </button>
                <button id="batchDeactivateMobile"
                    class="bg-red-600 text-white px-3 py-1 rounded disabled:opacity-60 text-xs">
                    Deactivate Selected
                </button>
            </div>

            <div>
                <h2 class="text-lg font-semibold mb-2 px-4">Service Info</h2>
                <div id="servicesListMobile" class="p-2 space-y-3"></div>
                <div
                    class="flex justify-between items-center mt-4 text-sm text-gray-600 max-w-md mx-auto px-4 select-none">
                    <button id="prevPageMobile" class="disabled:opacity-50" aria-label="Previous page">←
                        Previous</button>
                    <span id="pageInfoMobile"></span>
                    <button id="nextPageMobile" class="disabled:opacity-50" aria-label="Next page">Next →</button>
                </div>
            </div>

            <!-- Mobile Modal -->
            <div id="vehicle-modal"
                class="fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 hidden">
                <div class="bg-white rounded-lg shadow-lg w-full max-w-md max-h-full flex flex-col overflow-hidden relative"
                    style="height: 100vh;">
                    <button id="modal-close-btn" aria-label="Close modal"
                        class="absolute top-4 right-4 text-gray-600 hover:text-gray-900 focus:outline-none">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="18" y1="6" x2="6" y2="18" />
                            <line x1="6" y1="6" x2="18" y2="18" />
                        </svg>
                    </button>
                    <div id="modal-content" class="p-6 overflow-auto flex-grow"></div>
                </div>
            </div>
        </section>
    </main>

    <!-- Add Service to Vehicle Modal -->
    <div id="add-service-modal"
        class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 hidden">
        <div role="dialog" aria-modal="true" aria-labelledby="addServiceTitle" tabindex="1"
            class="bg-white rounded-lg max-w-lg w-full max-h-[90vh] overflow-y-auto p-6 relative shadow-lg">
            <button id="closeAddServiceModal" aria-label="Close modal"
                class="absolute top-3 right-3 text-gray-600 hover:text-gray-900 text-3xl font-bold">&times;</button>
            <h2 id="addServiceTitle" class="text-2xl font-bold mb-6 text-center">Add Service to Vehicle</h2>
            <form id="addServiceForm" autocomplete="off" class="space-y-4">
                <div class="relative">
                    <label for="brandInput" class="font-semibold block mb-1">Brand <span
                            class="text-red-600">*</span></label>
                    <input id="brandInput" name="brand" type="text" aria-autocomplete="list"
                        aria-controls="brandSuggestionList" aria-haspopup="listbox" aria-expanded="false"
                        class="border border-gray-300 rounded w-full p-2" />
                    <ul id="brandSuggestionList" class="suggestion-list hidden" role="listbox"></ul>
                    <p id="brandError" class="text-xs text-red-600 mt-1 hidden">Please choose a valid brand.</p>
                </div>

                <div>
                    <label for="modelSelect" class="font-semibold block mb-1">Model <span
                            class="text-red-600">*</span></label>
                    <select id="modelSelect" name="model" disabled class="border border-gray-300 rounded w-full p-2">
                        <option value="">Select brand first</option>
                    </select>
                    <p id="modelError" class="text-xs text-red-600 mt-1 hidden">Please select a model.</p>
                </div>

                <div>
                    <label for="fuelSelect" class="font-semibold block mb-1">Fuel Type <span
                            class="text-red-600">*</span></label>
                    <select id="fuelSelect" name="fuel" disabled class="border border-gray-300 rounded w-full p-2">
                        <option value="">Select fuel type</option>
                        <option value="Petrol">Petrol</option>
                        <option value="Diesel">Diesel</option>
                        <option value="EV">EV</option>
                        <option value="Hybrid">Hybrid</option>
                        <option value="CNG">CNG</option>
                    </select>
                    <p id="fuelError" class="text-xs text-red-600 mt-1 hidden">Please select fuel type.</p>
                </div>

                <fieldset class="mb-2">
                    <legend class="font-semibold mb-1">Vehicle Type <span class="text-red-600">*</span></legend>
                    <div class="flex gap-6">
                        <label class="inline-flex items-center">
                            <input type="radio" name="vehicleType" value="two-wheeler" disabled />
                            <span class="ml-2">Two-Wheelers</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="vehicleType" value="four-wheeler" disabled />
                            <span class="ml-2">Four-Wheelers</span>
                        </label>
                    </div>
                    <p id="typeError" class="text-xs text-red-600 mt-1 hidden">Please select vehicle type.</p>
                </fieldset>

                <div class="relative">
                    <label for="serviceNameInput" class="font-semibold block mb-1">Service Name <span
                            class="text-red-600">*</span></label>
                    <input id="serviceNameInput" name="serviceName" type="text" autocomplete="off"
                        aria-autocomplete="list" aria-controls="serviceSuggestionList" aria-haspopup="listbox"
                        aria-expanded="false" disabled class="border border-gray-300 rounded w-full p-2" />
                    <ul id="serviceSuggestionList" class="suggestion-list hidden" role="listbox"></ul>
                    <p id="serviceError" class="text-xs text-red-600 mt-1 hidden">Please enter a service name.</p>
                </div>

                <div>
                    <label for="timeToCompleteInput" class="font-semibold block mb-1">Time to Complete (minutes) <span
                            class="text-red-600">*</span></label>
                    <input id="timeToCompleteInput" name="timeToComplete" type="number" min="1" disabled
                        class="border border-gray-300 rounded w-full p-2" />
                    <p id="timeError" class="text-xs text-red-600 mt-1 hidden">Please enter valid time.</p>
                </div>

                <div>
                    <label for="priceInput" class="font-semibold block mb-1">Price <span
                            class="text-red-600">*</span></label>
                    <input id="priceInput" name="price" type="number" min="0" step="0.01" disabled
                        class="border border-gray-300 rounded w-full p-2" />
                    <p id="priceError" class="text-xs text-red-600 mt-1 hidden">Please enter valid price.</p>
                </div>

                <button type="submit" id="addServiceSubmitBtn" disabled
                    class="w-full bg-primary hover:bg-indigo-900 text-white p-3 rounded font-semibold transition disabled:opacity-50">
                    Add Service
                </button>
            </form>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" role="alert" aria-live="assertive"
        class="fixed bottom-6 right-6 bg-green-600 text-white px-5 py-3 rounded opacity-0 pointer-events-none transition-opacity z-50">
    </div>

    <!-- Universal Confirmation Modal -->
    <div id="confirmModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 hidden">
        <div class="bg-white p-6 rounded shadow-lg max-w-xs w-full text-center">
            <p id="confirmText" class="mb-4"></p>
            <div class="flex justify-center space-x-2">
                <button id="confirmYes" class="bg-primary text-white px-3 py-1 rounded">Yes</button>
                <button id="confirmNo" class="bg-gray-200 text-gray-700 px-3 py-1 rounded">No</button>
            </div>
        </div>
    </div>

    <script type="module" src="/components/components-loader.js"></script>

    <script type="module" src="./JS/service-management.js"></script>
</body>

</html>